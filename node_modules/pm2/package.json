{
  "name": "pm2",
  "preferGlobal": "true",
  "version": "0.8.15",
  "os": [
    "!win32"
  ],
  "engines": {
    "node": ">=0.10"
  },
  "directories": {
    "bin": "./bin",
    "lib": "./lib",
    "example": "./examples"
  },
  "author": {
    "name": "Strzelewicz Alexandre",
    "email": "as@unitech.io",
    "url": "http://pm2.io"
  },
  "maintainers": [
    {
      "name": "tknew"
    },
    {
      "name": "soyuka",
      "email": "soyuka@gmail.com"
    },
    {
      "name": "Alex Kocharin",
      "email": "alex@kocharin.ru"
    },
    {
      "name": "achingbrain",
      "email": "alex@achingbrain.net"
    }
  ],
  "contributors": [
    {
      "name": "Alex Kocharin",
      "email": "alex@kocharin.ru"
    },
    {
      "name": "Soyuka",
      "email": "soyuka@gmail.com"
    },
    {
      "name": "Soyuka",
      "email": "soyuka@gmail.com"
    },
    {
      "name": "Xu Jingxin",
      "email": "sailxjx@gmail.com"
    },
    {
      "name": "Ben Postlethwaite",
      "email": "post.ben.here@gmail.com"
    },
    {
      "name": "Devo.ps",
      "email": "contact@devo.ps"
    },
    {
      "name": "Bret Copeland",
      "email": "bret@atlantisflight.org"
    },
    {
      "name": "John Hurliman",
      "email": "jhurliman@jhurliman.org"
    },
    {
      "name": "TruongSinh Tran-Nguyen",
      "email": "i@truongsinh.pro"
    }
  ],
  "homepage": "https://github.com/Unitech/pm2",
  "description": "Modern CLI process manager for Node apps with a builtin load-balancer",
  "main": "index.js",
  "scripts": {
    "test": "bash ./test/cli.sh && bash ./test/json_file.sh && bash ./test/harmony.sh && bash ./test/reload.sh && bash ./test/right-exit-code.sh && bash ./test/log-reload.sh && bash ./test/gracefulReload.sh && bash ./test/cli2.sh && bash ./test/misc.sh  && bash ./test/watchdog.sh && bash ./test/fork.sh && bash ./test/infinite_loop.sh && NODE_ENV=test ./node_modules/mocha/bin/mocha test"
  },
  "keywords": [
    "cli",
    "fault tolerant",
    "sysadmin",
    "tools",
    "h24",
    "pm2",
    "harmony",
    "node-pm2",
    "production",
    "vitalsigns",
    "pm2.io",
    "ghost",
    "ghost production",
    "monitoring",
    "process manager",
    "forever",
    "keep process alive",
    "process configuration",
    "clustering",
    "cluster cli",
    "cluster",
    "cron",
    "devops",
    "dev ops"
  ],
  "bin": {
    "pm2": "./bin/pm2"
  },
  "dependencies": {
    "commander": "2.2.0",
    "cli-table": "0.3.0",
    "pm2-multimeter": "0.1.2",
    "pm2-interface": "0.1.3",
    "pm2-axon-rpc": "0.0.2",
    "axon": "1.0.0",
    "cron": "1.0.1",
    "colors": "0.6.2",
    "coffee-script": "1.7.0",
    "eventemitter2": "0.4.13",
    "debug": "*",
    "async": "0.7.0",
    "chokidar": "~0.8.2",
    "json-stringify-safe": "*",
    "pidusage": "0.0.4",
    "nssocket": "*"
  },
  "devDependencies": {
    "mocha": "1.x",
    "should": "3.x",
    "better-assert": "*",
    "axm": "*"
  },
  "bugs": {
    "url": "https://github.com/Unitech/pm2/issues"
  },
  "repository": {
    "type": "git",
    "url": "git://github.com/Unitech/pm2.git"
  },
  "license": "AGPLv3",
  "readme": "# ![PM2](https://github.com/unitech/pm2/raw/master/pres/top-logo-wo.png)\n\nPM2 is a process manager for Node apps with a built-in load balancer.\n\n### Tech notes\n\nPM2 is perfect when you need to spread your stateless Node.js code accross all CPUs available on a server, to keep all processes alive forever and to 0s reload them.\n\n### Main features\n\n- Built-in load balancer (using the native cluster module)\n- Script daemonization\n- 0s downtime reload for Node apps\n- Generate SystemV/SystemD startup scripts (Ubuntu, Centos...)\n- Pause unstable process (avoid infinite loop)\n- Restart on file change with `--watch`\n- Monitoring in console\n- [Free server/pm2 monitoring by ping strategy](#builtin-remote-monitoring)\n\nTested with Node v0.11, v0.10 (https://travis-ci.org/Unitech/pm2).\n\n**The recommended Node.js version is v0.11.10**\n\nCompatible with CoffeeScript.\nWorks on Linux & MacOS.\n\n[![Build Status](https://david-dm.org/Unitech/pm2.png)](https://david-dm.org/Unitech/pm2)\n[![NPM version](https://badge.fury.io/js/pm2.png)](http://badge.fury.io/js/pm2)\n[![Donate](http://gravaco.in/b06327acf5ae1a2ce3f08254ed7f33d7.png)](http://goo.gl/sdaIwX)\n\n[![NPM](https://nodei.co/npm/pm2.png?downloads=true)](https://nodei.co/npm/pm2.png?downloads=true)\n\n<!-- ### Build Status -->\n\nMaster: [![Build Status](https://api.travis-ci.org/Unitech/pm2.png?branch=master)](https://travis-ci.org/Unitech/pm2)\n\nDevelopment: [![Build Status](https://api.travis-ci.org/Unitech/pm2.png?branch=development)](https://travis-ci.org/Unitech/pm2)\n\n## Monitoring dashboard\n\n![Dashboard](http://leapfrogui.com/controlfrog/img/cf-layout-1.png)\n\nWe're going to release a very nice product, a dashboard to monitor every part of your Node.js applications. Here are some links:\n\n- [Pitch + Survey](https://docs.google.com/forms/d/1FuCjIhrGg-ItxInq2nLreoe9GS-gZWJNkNWE0JJajw8/viewform) People who fill the survey will be eligible for free license\n- [Newsletter](http://signup.pm2.io/) Subscribe to be kept informed\n\nThanks in advance and we hope that you like PM2!\n\n------\n\n## Table of contents\n\n### Quick start\n\n- [Installation](#a1)\n- [Usage](#a2)\n- [Examples](#a3)\n- [Differents ways to launch a process](#a667)\n- [Options](#a987)\n- [How to update PM2 ?](#update-pm2)\n- [Builtin remote monitoring](#builtin-remote-monitoring)\n\n### Features\n\n- [Transitional state of apps](#a4)\n- [Process listing](#a6)\n- [Monitoring CPU/Memory usage](#a7)\n- [Logs management](#a9)\n- [Clustering](#a5)\n- [Watch & Restart](#a890)\n- [Reloading without downtime](#a690)\n- [Make PM2 restart on server reboot](#a8)\n- [JSON app declaration](#a10)\n\n### Specific\n\n- [Specific features](#a77)\n- [Configuration file](#a989)\n- [Enabling Harmony ES6](#a66)\n- [CoffeeScript](#a19)\n- [Testing PM2 on your prod environment](#a149)\n- [JSON app via pipe](#a96)\n\n### Knowledge\n\n- [Stateless apps ?](#stateless-apps)\n- [Transitional state of apps](#a4)\n- [Setup PM2 on server: tutorial](#a89)\n- [Logs and PID files](#a34)\n- [Execute any script: What is fork mode ?](#a23)\n\n### More\n\n- [Contributing/Development mode](#a27)\n- [Known bugs and workaround](#a21)\n- [They talk about it](#a20)\n- [License](#a15)\n\n------\n\n# Quick start\n\n<a name=\"a1\"/>\n## Installation\n\nThe preferred Node version to run PM2, is the **0.11.10**\n\nThe latest stable version is installable via NPM:\n\n```bash\n$ npm install pm2@latest -g\n```\n\nIf the above fails:\n\n```bash\n$ npm install git://github.com/Unitech/pm2#master -g\n```\n\n<a name=\"a2\"/>\n## Usage\n\nHello world:\n\n```bash\n$ pm2 start app.js\n```\n\n<a name=\"a3\"/>\n## Examples\n\nRaw examples:\n\n```bash\n$ pm2 start app.js --name my-api # Name process\n\n$ pm2 start app.js -i max        # Will start maximum processes with LB depending on available CPUs\n\n# Listing\n\n$ pm2 list               # Display all processes status\n$ pm2 jlist              # Print process list in raw JSON\n$ pm2 prettylist         # Print process list in beautified JSON\n\n$ pm2 describe 0         # Display all informations about a specific process\n\n$ pm2 monit              # Monitor all processes\n\n# Builtin monitoring via PING strategy\n\n$ pm2 subscribe my@email.com  # Send an email if your server or pm2 is down\n$ pm2 unsubscribe             # Unable the remote monitoring\n\n# Logs\n\n$ pm2 logs               # Display all processes logs in streaming\n$ pm2 flush              # Empty all log file\n$ pm2 reloadLogs         # Reload all logs\n\n# Actions\n\n$ pm2 stop all           # Stop all processes\n$ pm2 restart all        # Restart all processes\n\n$ pm2 reload all         # Will 0s downtime reload (for NETWORKED apps)\n$ pm2 gracefulReload all # Send exit message then reload (for networked apps)\n\n$ pm2 stop 0             # Stop specific process id\n$ pm2 restart 0          # Restart specific process id\n\n$ pm2 delete 0           # Will remove process from pm2 list\n$ pm2 delete all         # Will remove all processes from pm2 list\n\n# Misc\n\n$ pm2 updatePM2          # Update in memory pm2\n$ pm2 ping               # Ensure pm2 dameon has been launched\n$ pm2 sendSignal SIGUSR2 my-app # Send system signal to script\n$ pm2 start app.js --no-daemon\n\n```\n\n## Different ways to launch a process\n\n```bash\n$ pm2 start app.js -i max  # Will start maximum processes depending on available CPUs\n\n$ pm2 start app.js -i 3    # Will start 3 processes\n\n$ pm2 start app.js -i max -- -a 23  # Pass arguments after -- to app.js\n\n$ pm2 start app.js -x            # Start app.js in fork mode instead of cluster\n$ pm2 start app.js -x -- -a 23   # Start app.js in fork mode and pass arguments (-a 23)\n\n$ pm2 start app.js --name serverone # Start a process an name it as server one\n                                    # you can now stop the process by doing\n                                    # pm2 stop serverone\n\n$ pm2 start app.json                # Start processes with options declared in app.json\n                                    # Go to chapter Multi process JSON declaration for more\n\n$ pm2 start app.js -i max -e err.log -o out.log  # Will start and generate a configuration file\n\n$ pm2 start app.js --node-args=\"--debug=7001 --trace-deprecation\" # --node-args command line option to pass options to node\n\n$ pm2 --run-as-user foo start app.js  # Start app.js as user foo instead of root (pm2 must be running as root)\n\n$ pm2 --run-as-user foo --run-as-group bar start app.js  # Start app.js as foo:bar instead of root:root (pm2 must be running as root)\n```\n\nFor scripts in other languages:\n\n```bash\n$ pm2 start echo.coffee\n$ pm2 start echo.php\n$ pm2 start echo.py\n$ pm2 start echo.sh\n$ pm2 start echo.rb\n$ pm2 start echo.pl\n```\n\n<a name=\"a987\"/>\n## Options\n\n```\nOptions:\n\n    -h, --help                   output usage information\n    -V, --version                output the version number\n    -v --verbose                 verbose level\n    -s --silent                  hide all messages\n    -m --mini-list               display a compacted list without formatting\n    -f --force                   force actions\n    -n --name <name>             set a <name> for script\n    -i --instances <number>      launch [number] (load balanced) instances (for networked app)\n    -o --output <path>           specify out log file\n    -e --error <path>            specify error log file\n    -p --pid <pid>               specify pid file\n    -x --execute-command         execute a program using fork system\n    -u --user <username>         define user when generating startup script\n    -c --cron <cron_pattern>     restart a running process based on a cron pattern\n    -w --write                   write configuration in local folder\n    --interpreter <interpreter>  the interpreter pm2 should use for executing app (bash, python...)\n    --no-daemon                  run pm2 daemon in the foreground if it doesn't exist already\n    --merge-logs                 merge logs\n    --watch                      watch application folder for changes\n    --node-args <node_args>      space-delimited arguments to pass to node in cluster mode - e.g. --node-args=\"--debug=7001 --trace-deprecation\"\n    --run-as-user <run_as_user>    The user or uid to run a managed process as\n    --run-as-group <run_as_group>  The group or gid to run a managed process as\n```\n\n<a name=\"update-pm2\"/>\n## How to update PM2\n\nInstall the latest PM2 version :\n\n```bash\n$ npm install pm2@latest -g\n```\n\nThen update the in-memory PM2 :\n\n```bash\n$ pm2 updatePM2\n```\n\n<a name=\"builtin-remote-monitoring\"/>\n## Builtin remote monitoring\n\nOn installation, you're asked if you want to enable the remote monitoring for your server or PM2.\nIf accepted and if you set the right email, you will receive an email if something hangs (offline).\n\nThis monitoring strategy **only do a ping** at a regular interval to pm2.io servers.\n\nIf you want to enable it after installation just do :\n\n```bash\n$ pm2 subscribe my@email.com\n# Once the monitoring enabled, you have to restart pm2 :\n$ pm2 dump\n$ pm2 kill\n$ pm2 resurrect\n```\n\nIf you want to stop the monitoring do :\n\n```bash\n$ pm2 unsubscribe\n```\n\n# Features\n\n<a name=\"a4\"/>\n## Transitional state of apps (important)\n\nPM2 is a process manager, as said, PM2 can start, stop, restart and *delete* processes.\n\nStart a process:\n\n```bash\n$ pm2 start app.js --name \"my-api\"\n$ pm2 start web.js --name \"web-interface\"\n```\n\nNow let's say I need to stop the web-interface:\n\n```bash\n$ pm2 stop web-interface\n```\n\nAs you can see **the process hasn't disapeared**. It is still there but now in `stopped` status.\n\nTo restart it just do:\n\n```bash\n$ pm2 restart web-interface\n```\n\nNow I want to **delete** the app from the PM2 process list.\nTo do that:\n\n```bash\n$ pm2 delete web-interface\n```\n\n<a name=\"a6\"/>\n## Process listing\n\n![Monit](https://github.com/unitech/pm2/raw/master/pres/pm2-list.png)\n\nTo list all running processes:\n\n```bash\n$ pm2 list\n# Or\n$ pm2 [list|ls|l|status]\n```\n\nTo get more details about a specific process:\n\n```bash\n$ pm2 describe 0\n```\n\n<a name=\"a7\"/>\n## Monitoring CPU/Memory usage\n\n![Monit](https://github.com/unitech/pm2/raw/master/pres/pm2-monit.png)\n\nMonitor all processes launched:\n\n```bash\n$ pm2 monit\n```\n\n<a name=\"a9\"/>\n## Logs management\n\n### Displaying logs in realtime\n\n![Monit](https://github.com/unitech/pm2/raw/master/pres/pm2-logs.png)\n\nDisplaying logs of specified process or all processes in realtime:\n\n```bash\n$ pm2 logs\n$ pm2 logs big-api\n$ pm2 flush # Clear all the logs\n```\n\n### Reloading all logs (SIGUSR2/Logrotate)\n\nTo reload all logs, you can send `SIGUSR2` to the PM2 process.\n\nYou can also reload all logs via the command line with:\n\n```bash\n$ pm2 reloadLogs\n```\n\n### Options\n\n```bash\n--merge-logs : merge logs from different instances but keep error and out separated\n```\n<a name=\"a5\"/>\n## Clustering\n\nLaunch `max` instances (`max` depending on the number of CPUs available) and set the load balancer to balance queries among process:\n\n```bash\n$ pm2 start app.js --name \"API\" -i max\n```\n\nIf your app is well-designed (**stateless**) you'll be able to **process many more queries**.\n\nImportant concepts to make a Node.js app stateless:\n\n- Sessions must not be stored in memory but shared via a database (Redis, Mongo, whatever)\n- [WebSocket/Socket.io should communicate via a database](https://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO)\n\n<a name=\"a690\"/>\n## Reloading without downtime\n\nAs opposed to `restart`, which kills and restarts the process, `reload` achieves a 0-second-downtime reload.\n\n**Warning** This feature only works for apps in *cluster mode* (the default mode), that uses HTTP/HTTPS/Socket connections.\n\nTo reload an app:\n\n```bash\n$ pm2 reload api\n```\n\nIf the reload system hasn't managed to reload gracefully, a timeout will simply kill the process and will restart it.\n\n### Graceful reload\n\nSometimes you can experience a **very long reload, or a reload that doesn't work** (fallback to restart).\n\nIt means that your app **still has open connections on exit**.\n\nTo work around this problem you have to use the graceful reload.\nGraceful reload is a mechanism that will send a *shutdown* message to your process before reloading it.\nYou can control the time that the app has to shutdown via the `PM2_GRACEFUL_TIMEOUT` environment variable.\n\nExample:\n\n```javascript\nprocess.on('message', function(msg) {\n  if (msg == 'shutdown') {\n    // Your process is going to be reloaded\n    // You have to close all database/socket.io/* connections\n\n    console.log('Closing all connections...');\n\n    // You will have 4000ms to close all connections before\n    // the reload mechanism will try to do its job\n\n    setTimeout(function() {\n      console.log('Finished closing connections');\n      // This timeout means that all connections have been closed\n      // Now we can exit to let the reload mechanism do its job\n      process.exit(0);\n    }, 1500);\n  }\n});\n```\n\nThen use the command:\n\n```bash\n$ pm2 gracefulReload [all|name]\n```\n\n<a name=\"a8\"/>\n## Startup script\n\nPM2 has the amazing ability to **generate startup scripts and configure them**.\nPM2 is also smart enough to **save all your process list** and to **bring back all your processes on restart**.\n\n```bash\n$ pm2 startup [ubuntu|centos|systemd]\n```\n\n**Warning** It's tricky to make this feature work generically, so once PM2 has setup your startup script, reboot your server to make sure that PM2 has launched your apps!\n\n### More information\n\nTwo types of startup scripts are available:\n\n- SystemV init script (with the option `ubuntu` or `centos`)\n- SystemD init script (with the `systemd` option)\n\nThe startup options are using:\n\n- **ubuntu** will use `updaterc.d` and the script `lib/scripts/pm2-init.sh`\n- **centos** will use `chkconfig` and the script `lib/scripts/pm2-init-centos.sh`\n- **systemd** will use `systemctl` and the script `lib/scripts/pm2.service`\n\n### User permissions\n\nLet's say you want the startup script to be executed under another user.\n\nJust use the `-u <username>` option !\n\n```bash\n$ pm2 startup ubuntu -u www\n```\n\n### Related commands\n\nDump all processes status and environment managed by pm2:\n```bash\n$ pm2 dump\n```\nIt populates the file `~/.pm2/dump.pm2` by default.\n\nTo bring back the latest dump:\n```bash\n$ pm2 resurrect\n```\n\n<a name=\"a890\"/>\n## Watch & Restart\n\npm2 can automatically restart your app when a file changes in the current directory or its subdirectories:\n\n```bash\n$ pm2 start app.js --watch\n```\n\n<a name=\"a10\"/>\n## JSON app declaration\n\nYou can define parameters for your apps in `processes.json`:\n\n```json\n[{\n  \"name\"        : \"echo\",\n  \"script\"      : \"examples/args.js\",\n  \"args\"        : \"['--toto=heya coco', '-d', '1']\",\n  \"ignoreWatch\" : [\"[\\\\/\\\\\\\\]\\\\./\", \"node_modules\"],\n  \"watch\"       : \"true\",\n  \"cwd\"         : \"/this/is/a/path/to/start/script\",\n  \"env\": {\n      \"NODE_ENV\": \"production\",\n      \"AWESOME_SERVICE_API_TOKEN\": \"xxx\"\n  }\n}, {\n  \"name\"       : \"api\",\n  \"script\"     : \"./examples/child.js\",\n  \"instances\"  : \"4\",\n  \"error_file\" : \"./examples/child-err.log\",\n  \"out_file\"   : \"./examples/child-out.log\",\n  \"pid_file\"   : \"./examples/child.pid\",\n  \"exec_mode\"  : \"cluster_mode\",\n  \"port\"       : 9005\n}, {\n  \"name\"       : \"auto-kill\",\n  \"script\"     : \"./examples/killfast.js\",\n  \"min_uptime\" : \"100\",\n  \"exec_mode\"  : \"fork_mode\",\n}]\n```\n\nThen run:\n```bash\n$ pm2 start processes.json\n$ pm2 stop processes.json\n$ pm2 delete processes.json\n$ pm2 restart processes.json\n```\n\n**A few notes about JSON app declarations:** \n\n- All command line options passed when using the JSON app declaration will be dropped i.e. \n```bash\n$ cat node-app-1.json\n\n{\n\"name\" : \"node-app-1\",\n\"script\" : \"app.js\",\n\"cwd\" : \"/srv/node-app-1/current\"\n}\n\n$ pm2 --run-as-user app start node-app-1.json \n\n$ ps aux | grep node-app\nroot 14735 5.8 1.1 752476 83932 ? Sl 00:08 0:00 pm2: node-app-1  <-- owned by the default user (root), not app\n```\n- JSON app declarations are additive.  Continuing from above:\n```bash\n$ pm2 start node-app-2.json\n$ ps aux | grep node-app \nroot  14735  5.8  1.1  752476  83932 ? Sl 00:08 0:00 pm2: node-app-1\nroot  24271  0.0  0.3  696428  24208 ? Sl 17:36 0:00 pm2: node-app-2\n```\nNote that if you execute `pm2 start node-app-2` again, it will spawn an additional instance node-app-2.\n\n- **cwd:** your JSON declaration does not need to reside with your script.  If you wished to maintain the JSON(s) in a location other than your script (say, `/etc/pm2/conf.d/node-app.json`) you will need to use the cwd feature.  (Note, this is especially helpful for capistrano style directory structures that use symlinks.)  Files can be either relative to the cwd directory, or absolute (example below.)\n\n- The following are valid options for JSON app declarations: \n```\n[{\n  \"name\"             : \"node-app\",\n  \"cwd\"              : \"/srv/node-app/current\",\n  \"script\"           : \"bin/app.js\",\n  \"error_file\"       : \"/var/log/node-app/node-app.stderr.log\",                    \n  \"out_file\"         : \"log/node-app.stdout.log\",\n  \"pid_file\"         : \"pids/node-geo-api.pid\", \n  \"run_as_user\"      : \"app\",\n  \"run_as_group\"     : \"www-data\",\n  \"instances\"        : \"6\",\n  \"min_uptime\"       : \"200\",\n  \"cron_restart\"     : \"1 0 * * *\",\n  \"watch\"            : \"false\",\n  \"merge_logs\"       : \"true\",\n  \"exec_interpreter\" : \"node\",\n  \"one_launch_only\"  : \"true\",\n  \"exec_mode\"        : \"cluster_mode\"\n}]\n```\n\n# Miscellaneous\n\n<a name=\"a77\"/>\n\nLaunching PM2 without daemonizing itself:\n\n```bash\n$ pm2 start app.js --no-daemon\n```\n\nSending a system signal to a process:\n\n```bash\n$ pm2 sendSignal SIGUSR2 my-app\n```\n\n<a name=\"a989\"/>\n## Configuration file\n\nYou can specifiy the following options by editing the file `~/.pm2/custom_options.sh`:\n\n```\nPM2_RPC_PORT\nPM2_PUB_PORT\nPM2_BIND_ADDR\nPM2_API_PORT\nPM2_GRACEFUL_TIMEOUT\nPM2_MODIFY_REQUIRE\nPM2_NODE_OPTIONS\n```\n\n\n## API health endpoint\n\n```bash\n$ pm2 web\n```\n\n<a name=\"a66\"/>\n## Enabling Harmony ES6\n\n### Enable by default for all processes\n\nYou can enable Harmony ES6 by setting `PM2_NODE_OPTIONS='--harmony'` environment variable option when you start PM2 (PM2 should not be already daemonized).\n\nTo pass this option by default, you can edit `~/.pm2/custom_options.sh` and add:\n\n```bash\nexport PM2_NODE_OPTIONS='--harmony'\n```\n\nThen:\n\n```bash\n$ pm2 dump\n$ pm2 exit\n$ pm2 resurrect\n```\n\nIf ES6 has been enabled you should see this message at the beggining of each PM2 command:\n\n```\n● ES6 mode\n```\n\n### Enable for specific processes\n\n```bash\n$ pm2 start my_app.js --node-args=\"--harmony\"\n```\n\n<a name=\"a19\"/>\n## CoffeeScript\n\n```bash\n$ pm2 start my_app.coffee\n```\n\nThat's all!\n\n# Knowledge\n\n\n<a name=\"stateless-apps\"/>\n## Statless apps\n\nWe recommend (and you must) write stateless NodeJS apps. Apps that don't retain any form of local variables or local instances or whatever local.\nEvery data, states, websocket session, session data, must be shared via any kind of database.\n\nWe recommend using Redis for sharing session data, websocket.\n\n- SocketIO with Redis : [https://github.com/LearnBoost/Socket.IO/wiki/Configuring-Socket.IO](Configuring SocketIO)\n- Redis session store for Connect : [https://github.com/visionmedia/connect-redis](Connect-redis)\n\nWe recommend following the 12 factor convention : [http://12factor.net/](http://12factor.net/)\n\n<a name=\"a89\"/>\n## Setup PM2 on a server\n\n[How To Use PM2 to Setup a Node.js Production Environment On An Ubuntu VPS](https://www.digitalocean.com/community/articles/how-to-use-pm2-to-setup-a-node-js-production-environment-on-an-ubuntu-vps)\n\n<a name=\"a34\"/>\n## Log and PID files\n\nBy default, logs (error and output), pid files, dumps, and PM2 logs are located in `~/.pm2/`:\n\n```\n.pm2/\n├── dump.pm2\n├── custom_options.sh\n├── pm2.log\n├── pm2.pid\n├── logs\n└── pids\n```\n\n<a name=\"a23\"/>\n## Execute any script: What is fork mode?\n\nThe default mode of PM2 consists of wrapping the code of your node application into the Node Cluster module. It's called the **cluster mode**.\n\nThere is also a more classical way to execute your app, like node-forever does, called the **fork mode**.\n\nIn fork mode almost all options are the same as the cluster mode. But there is no [`reload`](#reloading-without-downtime) or `gracefulReload` command.\n\n**By using the fork mode you will lose core features of PM2 like the automatic clusterization of your code over all CPUs available and the 0s reload.**\n\nSo use it if you only need a forever-like behaviour.\n\nHere is how to start your app within a fork:\n\n```bash\n$ pm2 start app.js -x   # Will start your app.js in fork mode\n$ pm2 list              # You will see that on the row \"mode\" it's written \"fork\"\n```\n\nYou can also exec scripts written in other languages:\n\n```bash\n$ pm2 start my-bash-script.sh -x --interpreter bash\n\n$ pm2 start my-python-script.py -x --interpreter python\n```\n\n<a name=\"a96\"/>\n## JSON app configuration via pipe from stdout\n\nPull-requests:\n- [#273](https://github.com/Unitech/pm2/pull/273)\n- [#279](https://github.com/Unitech/pm2/pull/279)\n\n```bash\n#!/bin/bash\n\nread -d '' my_json <<_EOF_\n[{\n    \"name\"       : \"app1\",\n    \"script\"     : \"/home/projects/pm2_nodetest/app.js\",\n    \"instances\"  : \"4\",\n    \"error_file\" : \"./logz/child-err.log\",\n    \"out_file\"   : \"./logz/child-out.log\",\n    \"pid_file\"   : \"./logz/child.pid\",\n    \"exec_mode\"  : \"cluster_mode\",\n    \"port\"       : 4200\n}]\n_EOF_\n\necho $my_json | pm2 start -\n```\n\n<a name=\"a149\"/>\n## Is my production server ready for PM2?\n\nJust try the tests before using PM2 on your production server\n\n```bash\n$ git clone https://github.com/Unitech/pm2.git\n$ cd pm2\n$ npm install  # Or do NODE_ENV=development npm install if some packages are missing\n$ npm test\n```\n\nIf a test is broken please report us issues [here](https://github.com/Unitech/pm2/issues?state=open)\nAlso make sure you have all dependencies needed. For Ubuntu:\n\n```bash\n$ sudo apt-get install build-essential\n# nvm is a Node.js version manager - https://github.com/creationix/nvm\n$ wget -qO- https://raw.github.com/creationix/nvm/master/install.sh | sh\n$ nvm install v0.11.10\n$ nvm use v0.11.10\n$ nvm alias default v0.11.10\n```\n\n<a name=\"a27\"/>\n## Contributing/Development mode\n\nTo hack PM2, it's pretty simple:\n\n```bash\n$ pm2 kill   # kill the current pm2\n$ git clone my_pm2_fork.git\n$ cd pm2/\n$ DEBUG=* PM2_DEBUG=true ./bin/pm2 --no-daemon\n```\n\nEach time you edit the code, be sure to kill and restart pm2 to make changes taking effect.\n\n## Install pm2 development\n\n```bash\n$ npm install git://github.com/Unitech/pm2#development -g\n```\n\n<a name=\"a21\"/>\n## Known bugs and workarounds\n\nFirst, install the lastest pm2 version:\n\n```bash\n$ npm install -g pm2@latest\n```\n\n### Node 0.10.x doesn't free the script port when stopped. It's due to the Node.js cluster module.\nSo if you feel that this problem is important for your use case, use the [fork mode](#execute-any-script-what-is-fork-mode-) instead.\nBy using the fork mode you will lose core features of PM2 like the automatic clusterization of your code over all CPUs available and the 0s reload.\n\n```\n$ pm2 start index.js -x  # start my app in fork mode\n```\n\nFor more information about this, see [issue #74](https://github.com/Unitech/pm2/issues/74).\n\n### `Cannot read property 'getsockname' of undefined`\n\nWhen using the cluster mode (by default) you can't use ports from 0 to 1024. If you really need to exec in this range use the [fork mode](#a23) with the `-x` parameter.\nBy using the fork mode you will lose core features of PM2 like the automatic clusterization of your code over all CPUs available and the 0s reload.\n\n<a name=\"a20\"/>\n## External resources and articles\n\n- [Goodbye node-forever, hello PM2](http://devo.ps/blog/2013/06/26/goodbye-node-forever-hello-pm2.html)\n- http://www.allaboutghost.com/keep-ghost-running-with-pm2/\n- http://blog.ponyfoo.com/2013/09/19/deploying-node-apps-to-aws-using-grunt\n- http://www.allaboutghost.com/keep-ghost-running-with-pm2/\n- http://bioselemental.com/keeping-ghost-alive-with-pm2/\n- http://blog.chyld.net/installing-ghost-on-ubuntu-13-10-aws-ec2-instance-with-pm2/\n- http://blog.marvinroger.fr/gerer-ses-applications-node-en-production-pm2/\n- https://www.codersgrid.com/2013/06/29/pm2-process-manager-for-node-js/\n- http://www.z-car.com/blog/programming/how-to-rotate-logs-using-pm2-process-manager-for-node-js\n- http://yosoftware.com/blog/7-tips-for-a-node-js/\n- https://www.exponential.io/blog/nodeday-2014-moving-a-large-developer-workforce-to-nodejs\n- http://blog.rapsli.ch/posts/2013/2013-10-17-node-monitor-pm2.html\n- https://coderwall.com/p/igdqyw\n- http://revdancatt.com/2013/09/17/node-day-1-getting-the-server-installing-node-and-pm2/\n- https://medium.com/tech-talk/e7c0b0e5ce3c\n\n## Contributors\n\n```\n   195  tknew2\n   184  Alexandre Strzelewicz\n    20  Alex Kocharin\n     8  soyuka\n     6  sailxjx\n     5  Bret Copeland\n     4  AS\n     4  Ville Walveranta\n     4  achingbrain\n     3  Ben Postlethwaite\n     3  Evan You\n     2  Frederico Silva\n     2  Ivan Seidel\n     2  MATSUU Takuto\n     2  Oleg\n     2  Willian\n     2  Yani Iliev\n     1  Almog Melamed\n     1  Brent Burgoyne\n     1  Daniel Pihlstrom\n     1  Ed Hubbell\n     1  Eugene Lucash\n     1  Gil Pedersen\n     1  Hao-kang Den\n     1  John Hurliman\n     1  Jose V. Trigueros\n     1  Josh Skidmore\n     1  Juozas Valenčius\n     1  Kevin Gao\n     1  Loïc Mahieu\n     1  Mark Evans\n     1  Nathan Peck\n     1  TruongSinh Tran-Nguyen\n     1  Wes Mason\n     1  Zihua Li\n     1  perfectworks\n     1  subeeshcbabu\n```\n\n## Sponsors\n\nThanks to [Devo.ps](http://devo.ps/) and [Wiredcraft](http://wiredcraft.com/) for their knowledge and expertise.\n\n[![Bitdeli Badge](https://d2weczhvl823v0.cloudfront.net/Unitech/pm2/trend.png)](https://bitdeli.com/free \"Bitdeli Badge\")\n\n<a name=\"a15\"/>\n# License\n\nFiles in `lib/` are made available under the terms of the GNU Affero General Public License (AGPL).\n`pm2-interface` is made under the terms of the Apache V2 license.\n",
  "readmeFilename": "README.md",
  "_id": "pm2@0.8.15",
  "dist": {
    "shasum": "93f002e9c4d333fe8e8c395c62c53beaa736af85"
  },
  "_from": "pm2@^0.8.1",
  "_resolved": "https://registry.npmjs.org/pm2/-/pm2-0.8.15.tgz"
}
